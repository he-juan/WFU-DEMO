<!-- saved from url=(0022)http://internet.e-mail -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link href='../css/pageframe.css' type='text/css' rel='stylesheet'>
<script type='text/javascript' src='../js/jquery.tools.min.js'></script>	
<script type="text/javascript" src='../js/jquery.cookie.js'></script>
<script type="text/javascript" src='../js/jquery.validate.min.js'></script>
<script type="text/javascript" src='../js/jquery.stylish-select.min.js'></script>
<body id="framebody">
<div class="tooltip"></div>

<div id="mainbody" class="maindiv">
    <div class="navi"><span id="a_call">Call Features</span></div>
	<form action="" method="get" id="Formvalidate">
		<fieldset>
		    <div webtip="Start Video Automatically">
                <div class="noreboot"><span id="a_autovideo">Start Video Automatically</span> :</div>
                <input name="autovideo" type="checkbox" id="autovideo"><span id="a_autovideoyes">Yes</span>
            </div>
            <div webtip="Always Ring Internal Ringer" style="display:none;">
                <div class="noreboot"><span id="a_alring">Always Ring Internal Ringer</span> :</div>
                <input name="alring" type="checkbox" id="alring"><span id="a_alringyes">Yes</span>
            </div>
            <div webtip="Auto Conference" style="display:none;">
                <div class="noreboot"><span id="a_autoconf">Auto Conference</span> :</div>
                <input name="autoconf" type="checkbox" id="autoconf"><span id="a_autoconfyes">Yes</span>
            </div>
            <!--div webtip="Disable Dial Plan">
                <div class="noreboot"><span id="a_disadiaplan">Disable DialPlan</span> :</div>
                <input name="dialplan" type="checkbox" id="dialplan"><span id="a_dialplanyes">Yes</span>
            </div-->
            <div webtip="Filter Characters">
                <div class="noreboot"><span id="a_filterchars">Filter Characters</span> :</div>
                <input id="filterchars" name="filterchars" type="text" />
            </div>
            <div webtip="Conference PIN Code" style="display:none;">
                <div class="noreboot"><span id="a_confpincode">Conference PIN Code</span> :</div>
                <input id="confpincode" name="confpincode" type="text" maxlength="10" />
            </div>
            <div webtip="Disable Call-Waiting" style="display:none">
                <div class="noreboot"><span id="a_callwait">Disable Call-Waiting</span> :</div>
                <input name="callwait" type="checkbox" id="callwait"><span id="a_callwaityes">Yes</span>
            </div>
            <div webtip="Disable Call-Waiting Tone" style="display:none">
                <div class="noreboot"><span id="a_discallwaittone">Disable Call-Waiting Tone</span> :</div>
                <input name="callwaittone" type="checkbox" id="callwaittone"><span id="a_discallwaittoneyes">Yes</span>
            </div>
            <div webtip="Disable DND Reminder Ring">
                <div class="noreboot"><span id="a_disdndring">Disable DND Reminder Ring</span> :</div>
                <input name="disdndring" type="checkbox" id="disdndring"><span id="a_disdndringyes">Yes</span>
            </div>
            <div webtip="Disable Direct IP Call" id="disableipcall">
                <div class="noreboot"><span id="a_diripcall">Disable Direct IP Call</span> :</div>
                <input name="ipcall" type="checkbox" id="ipcall"><span id="a_diripcallyes">Yes</span>
            </div>
            <div webtip="Use Quick IP-call mode">
                <div class="noreboot"><span id="a_usequickipcall">Use Quick IP-call mode</span> :</div>
                <input name="usequickipcall" type="checkbox" id="usequickipcall"><span id="a_usequickipcallyes">Yes</span>
            </div>
            <div webtip="Disable Conference" style="display:none;">
                <div class="noreboot"><span id="a_disableconf">Disable Conference</span> :</div>
                <input name="disableconf" type="checkbox" id="disableconf"><span id="a_disableconfyes">Yes</span>
            </div>
            <div webtip="Disable Transfer" style="display:none;">
                <div class="noreboot"><span id="a_disabletrnf">Disable Transfer</span> :</div>
                <input name="disabletrnf" type="checkbox" id="disabletrnf"><span id="a_disabletrnfyes">Yes</span>
            </div>
            <div webtip="Default Transfer Mode" style="display:none;">
                <div class="noreboot"><span id="a_dfttrnfmode">Default Transfer mode</span> :</div>
                <select id="dfttrnfmode">
                    <option value="0">Blind Transfer</option>
                    <option value="1">Attended Transfer</option>
                </select>
            </div>
            <div webtip="Enable Frame Skipping in Video Decoder">
                <div class="noreboot"><span id="a_viddecodefs">Enable Frame Skipping in Video Decoder</span> :</div>
                <input name="viddecodefs" type="checkbox" id="viddecodefs"><span id="a_viddecodefsyes">Yes</span>
            </div>
            <div webtip="Video Display Mode">
                <div class="noreboot"><span id="a_avspipmode">Video Display Mode</span> :</div>
                <select id='avspipmode'>
                    <option value="0">Original Proportion</option>
                    <option value="1" selected="selected">Equal Proportional Cutting</option>
                    <option value="2">Proportional Add Black Edge</option>
                </select>
            </div>
            <div webtip="Allow Media Loopback" style="display:none">
                <div class="noreboot"><span id="a_allowloop">Allow Media Loopback</span> :</div>
                <input name="allowloop" type="checkbox" id="allowloop"><span id="a_allowloopyes">Yes</span>
            </div>
            <div webtip="Enable MPK sending DTMF" style="display:none">
                <div class="noreboot"><span id="a_enablempk">Enable MPK sending DTMF</span> :</div>
                <input name="enablempk" type="checkbox" id="enablempk"><span id="a_enablempkyes">Yes</span>
            </div>
            <div webtip="Escape '#' as %23 in SIP URI">
                <div class="noreboot"><span id="a_escapeuri">Escape '#' as %23 in SIP URI</span> :</div>
                <input name="escapeuri" type="checkbox" id="escapeuri"><span id="a_escapeuriyes">Yes</span>
            </div>
            <div webtip="Auto Mute on Entry">
                <div class="noreboot"><span id="a_entrymute">Auto Mute on Entry</span> :</div>
                <select id='entrymute'>
                    <option value='0'>Disable</option>
                    <option value='1'>Auto Mute on Incoming Call</option>
                    <option value='2'>Auto Mute on Outgoing Call</option>
                    <option value='3'>Auto Mute on Incoming & Outgoing Call</option>
                </select>
            </div>
            <div webtip="Noise Shield">
                <div class="noreboot"><span id="a_noiseblock">Noise shield</span> :</div>
                <input name="noiseblock" type="checkbox" id="noiseblock"><span id="a_noiseblockyes">Yes</span>
            </div>
            <div webtip="Enable Function for Incoming Call" style="display:none;">
                <div class="noreboot"><span id="a_enablefncall">Enable Function for Incoming Call</span> :</div>
                <select id="enablefncall">
                    <option value="0">None</option>
                    <option value="1">Preview</option>
                </select>
            </div>
            <div webtip="Offhook Auto Dial" style="display:none;">
                <div class="noreboot"><span id="a_ofhdial">Offhook Auto Dial</span> :</div>
                <input id="ofhdial" name="ofhdial" type="text" />
            </div>
            <div webtip="Offhook Timeout" style="display:none;">
                <div class="noreboot"><span id="a_ofhtimeout">Offhook Timeout (s)</span> :</div>
                <input id="ofhtimeout" name="ofhtimeout" type="text" />
            </div>
            <div webtip="System Recommends Layout">
                <div class="noreboot"><span id="a_commonlayout">System Recommends Layout</span> :</div>
                <select id="commonlayout">
                    <!--<option value="0">Default mode</option>-->
                    <option value="0">Average mode</option>
                    <option value="1">POP mode</option>
                    <option value="2">PIP mode</option>
                </select>
            </div>
        </fieldset>
        <div class="savediv">
            <div id="statusdiv"></div>
            <button id="a_save" type="button" class="savebtn">Save</button>
            <button id="a_cancel" type="button" class="cancelbtn">Cancel</button>
        </div>
	</form>
</div>
<script type="text/javascript">
	var cookie_lang = $.cookie( "MyLanguage");
    var version = $.cookie("ver");
    if ( !cookie_lang ){
        cookie_lang = 'en';
	}
    if ( cookie_lang == 'zh' ){
        document.write("<script src='../js/jquery.validate.messages_cn.js'><\/script>");
	}
    if(!version)
        version = new Date().getTime();
    document.write("<script src='../js/public.js?ver=" + version + "'><\/script>");
    document.write("<script src='../lang/" + cookie_lang + ".js?ver=" + version + "'><\/script>");

</script>
<script type="text/javascript">
var ishdmione4K = false;
var req_items = new Array;
req_items.push(
    new ReqItem("autovideo", "25023", ""),
    new ReqItem("alring", "1439", ""),
    new ReqItem("autoconf", "1682", ""),
    new ReqItem("callwait", "91", ""),
    /*new ReqItem("dialplan", "1687", ""),*/
    new ReqItem("filterchars", "22012", ""),
    new ReqItem("confpincode", "22052", ""),
    new ReqItem("callwaittone", "186", ""),
    new ReqItem("disdndring", "1486", ""),
    new ReqItem("ipcall", "277", ""),
    new ReqItem("usequickipcall", "184", ""),
    new ReqItem("disableconf", "1311", ""),
    new ReqItem("disabletrnf", "1341", ""),
    new ReqItem("dfttrnfmode", "1685", ""),
    new ReqItem("viddecodefs", "22008", ""),
    new ReqItem("enablempk", "1339", ""),
    new ReqItem("escapeuri", "1406", ""),
    new ReqItem("ofhdial", "71", ""),
    new ReqItem("ofhtimeout", "1485", ""),
    new ReqItem("entrymute", "29607", ""),
    new ReqItem("avspipmode", "921", ""),
    new ReqItem("noiseblock", "25110", ""),
    new ReqItem("commonlayout", "default_layout_mode", "")
    //new ReqItem("enablefncall", "preview", ""),
);
$(function(){
    //translate_callfea();
    cb_get(req_items);
    cb_get_action("gethdmione4K&region=confctrl");
    setInitState();
    pageEventActions();
    var colore = $('#existcolore',parent.document.body).val();
    if( colore == 1 )
    {
        $("#disableipcall").hide();
    }else{
        $("#disableipcall").show();
    }
    
    if( colore == 54 ){
        $("#disableipcall").hide();
        $("#usequickipcall").parent().hide();
    }
});
function setInitState(){
    translate_callfea();
    $("#dfttrnfmode,#enablefncall, #entrymute, #avspipmode,#commonlayout").sSelect();
    $("#Formvalidate").validate({
		rules: { 
		        confpincode: { digits:true },
				ofhtimeout: { digits:true, range:[10,60] }
		},
		errorElement: "em",
		success: function(label) { label.text(" ").addClass("success"); }
    });
}
function get_item_suc_callback(msgs) 
{
    
}
function translate_callfea(){
    $("#a_call").text(a_16008);
    $("#a_alring").text(a_16288);
    $("#a_autoconf").text(a_16289);
    $("#a_callwait").text(a_16641);
    $("#a_autovideo").text(a_16151);
    $("#a_autovideoyes, #a_alringyes, #a_autoconfyes, #a_callwaityes, #a_discallwaittoneyes, #a_diripcallyes, #a_escapeuriyes, #a_noiseblockyes, #a_disdndringyes, #a_usequickipcallyes, #a_disabletrnfyes, #a_disableconfyes, #a_enablempkyes, #a_allowloopyes, #a_viddecodefsyes").text(a_5);
    $("#a_discallwaittone").text(a_16290);
    $("#a_disadiaplan").text(a_16291);
    $("#a_filterchars").text(a_19112);
    $("#a_confpincode").text(a_19133);
    $("#a_disdndring").text(a_16292);
    $("#a_diripcall").text(a_16293);
    $("#a_usequickipcall").text(a_16294);
    $("#a_disabletrnf").text(a_16295);
    $("#a_dfttrnfmode").text(a_16296);
    $("#dfttrnfmode option:eq(0)").text(a_630);
    $("#dfttrnfmode option:eq(1)").text(a_629);
    $("#a_viddecodefs").text(a_16276);
    $("#a_disableconf").text(a_16297);
    $("#a_enablempk").text(a_16298);
    $("#a_avspipmode").text(a_19365);
    $("#a_allowloop").text(a_16299);
    $("#a_escapeuri").text(a_16300);
    $("#a_ofhdial").text(a_16301);
    $("#a_ofhtimeout").text(a_16302);
    $("#a_cancel").text(a_3);
    $("#a_save").text(a_17);
    $("#a_enablefncall").text(a_16615);
    $("#enablefncall option:eq(0)").text(a_20);
    $("#enablefncall option:eq(1)").text(a_68);
    $("#a_entrymute").text(a_19328);
    $("#entrymute option:eq(0)").text(a_39);
    $("#entrymute option:eq(1)").text(a_19329);
    $("#entrymute option:eq(2)").text(a_19330);
    $("#entrymute option:eq(3)").text(a_19331);
    $("#avspipmode option:eq(0)").text(a_19366);
    $("#avspipmode option:eq(1)").text(a_19367);
    $("#avspipmode option:eq(2)").text(a_19368);
    $("#a_commonlayout").text(a_12233);
//    $("#commonlayout option:eq(0)").text(a_16394);
    $("#commonlayout option:eq(0)").text(a_19384);
    $("#commonlayout option:eq(1)").text(a_19385);
    $("#commonlayout option:eq(2)").text(a_19386);
}

function cb_get_action_done(data, action){
    if( data.substring(0, 1) == "{" )
    {
        data = data.replace(/\r/g, "\\r").replace(/\n/g, "\\n");
        if (action.indexOf("gethdmione4K") != -1) {
            var tObj = eval("(" + data + ")");
            ishdmione4K = eval(tObj.isHdmiOne4K);
            if(ishdmione4K){
                $("#commonlayout").parent().hide();
            }
        }
    }
}
function cb_put_suc(data, mode)
{
    var msgs = res_parse_rawtext(data);
	cb_if_auth_fail(msgs);
	if( cb_if_is_fail(msgs) )
	    view_message(a_16419, MSG_FAIL);
    else {
        view_message(a_7479, MSG_OK); 
    }
    checkIsApplyNeed();
}


function pageEventActions(){
    $("#disableconf").click(function(){
        var calltabs = window.parent.frames["confFrame"].countTabs();
        if(calltabs > 0)
        {
            view_message(a_16655, MSG_FAIL);
            return false;
        }
    });
    
    $("#a_save").click(function(){
        if( !$("#Formvalidate").valid() ){
            view_message(a_16442,MSG_FAIL);
            return false;
        }
        cb_put(req_items, "");

        var Disconf = "0";
        var Autovideo = "0";
        var distranfer = "0";
        var disipcall = "0";
        var disquickipcall = "0";
        var disadiaplan = "0";
        var tranfermode = $("#dfttrnfmode").val();
        if( $("#disableconf").prop("checked") )
            Disconf = "1";
        if( $("#autovideo").prop("checked") )
            Autovideo = "1";
        if($("#disabletrnf").prop("checked"))
            distranfer = "1";
        if($("#ipcall").prop("checked"))
            disipcall = "1";
        if($("#usequickipcall").prop("checked"))
            disquickipcall = "1";
        /*if($("#dialplan").prop("checked"))
            disadiaplan = "1";*/
        var applyfun = $.cookie("applyfunc");
        if (applyfun != undefined && applyfun != "")
            applyfun += ";cb_set_disableconf(" + Disconf + "," + Autovideo + "," + distranfer + "," + disipcall + "," + tranfermode + "," + disquickipcall + ")";
        else
            applyfun = "cb_set_disableconf(" + Disconf + "," + Autovideo + "," + distranfer + "," + disipcall + "," + tranfermode + "," + disquickipcall + ")";
        $.cookie("applyfunc", applyfun, {path: '/', expires: 10});
    });
}

</script>

</body>

</html>
