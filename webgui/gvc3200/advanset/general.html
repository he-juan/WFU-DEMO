<!-- saved from url=(0022)http://internet.e-mail -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link href='../css/pageframe.css' type='text/css' rel='stylesheet'>
<script type='text/javascript' src='../js/jquery.tools.min.js'></script>	
<script type="text/javascript" src='../js/jquery.cookie.js'></script>
<script type="text/javascript" src='../js/jquery.validate.min.js'></script>
<script type="text/javascript" src='../js/jquery.stylish-select.min.js'></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src='../js/jscolor.js'></script>
<style>
.dragContainer{width:222px;height:38px;overflow:hidden;position:relative;}
.voldragDiv{width:200px;height:22px;background: url("../img/settings_volume_none.png") no-repeat 0 8px;position:absolute;top:-8px;left: 10px;margin-top:22px !important;}
.volimg{width:22px;height:22px;background:url("../img/settings_volume_button.png") no-repeat;position:absolute;left:0px;top: -8px;margin-top:22px !important;}
.volchangeDiv{height:6px;background:#2C9BEA;position:absolute;top:0px;left: 10px;border-radius:2px;width:0px;*overflow:hidden;margin-top:22px !important;}
.volspan{width:22px;height:6px;color:#777;font-size:14px;position: relative;top:-15px;display: inline-block;text-align: center;}
.startspan,.endspan{width: auto;margin-top: 22px !important;}
</style>
<body id="framebody">
<div id="mainbody" class="maindiv">
    <div class="navi"><span id="a_general">General Settings</span></div>
	<div id="statusdiv"></div>
	<form action="" method="get" id="Formvalidate">
		<fieldset>
            <div class="titlediv">
                <div class="titleboot"><span id="a_powertitle">Power Managerment</span></div>
            </div>
            <div webtip="Timeout Operation">
                <div class="noreboot"><span id="a_timeoutopt">Timeout Operation</span> :</div>
                <select id="timeoutopt" name="timeoutopt">
                    <option value="0">Sleep</option>
                    <option value="2">Shutdown</option>
                </select>
            </div>
            <div webtip="Enter Sleep Mode">
                <div class="noreboot"><span id="a_sleepmode">Enter sleep mode</span> :</div>
                <select id="sleepmode" name="sleepmode">
                    <option value="-1">Never</option>
                    <option value="60000">1</option>
                    <option value="300000">5</option>
                    <option value="600000">10</option>
                    <option value="900000">15</option>
                    <option value="1800000">30</option>
                    <option value="3600000">60</option>
                </select>
            </div>
            <!--site settings-->
            <div class="titlediv sitesettings">
                <div class="titleboot"><span id="a_sitetitle">Site Settings</span></div>
            </div>
            <div webtip="Background Transparency" class="sitesettings">
                <div class="noreboot"><span id="a_bgtransparency">Background transparency</span> :</div>
                <select id="bgtransparency" name="bgtransparency">
                    <option value="0">Opaque</option>
                    <option value="1">5%</option>
                    <option value="2">10%</option>
                    <option value="3">15%</option>
                    <option value="4">20%</option>
                </select>
            </div>
            <div webtip="Site Name" class="sitesettings">
                <div class="noreboot"><span id="a_sitename">Site name</span> :</div>
                <input id="sitename" name="sitename" type="text" />
            </div>
            <div webtip="Display Position" class="sitesettings">
                <div class="noreboot"><span id="a_displayposition">Display position</span> :</div>
                <select id="displayposition" name="displayposition">
                    <option value="0">Upper left corner</option>
                    <option value="1">Upper right corner</option>
                    <option value="2">Lower left corner</option>
                    <option value="3">Lower right corner</option>
                </select>
            </div>
            <div webtip="Display Duration" class="sitesettings">
                <div class="noreboot"><span id="a_displayduration">Display duration</span> :</div>
                <select id="displayduration" name="displayduration">
                    <option value="0">do not display</option>
                    <option value="1">1 minute</option>
                    <option value="2">5 minutes</option>
                    <option value="3">10 minutes</option>
                    <option value="4">Always display</option>
                </select>
            </div>
            <div webtip="Font Color" class="sitesettings">
                <div class="noreboot"><span id="a_fontcolor">Font color</span> :</div>
                <input class="color" autocomplete="off" id="fontcolor"/>
            </div>
            <div webtip="Font Size" class="sitesettings">
                <div class="noreboot"><span id="a_fontsize">Font size</span> :</div>
                <select id="fontsize" name="fontsize">
                    <option value="0">Smallest</option>
                    <option value="1">Smaller</option>
                    <option value="2">Smalle</option>
                    <option value="3">Medium</option>
                    <option value="4">Large</option>
                    <option value="5">Larger</option>
                    <option value="6">Largest</option>
                </select>
            </div>
            <div webtip="Bold" style="margin-bottom: 0px;" class="sitesettings">
                <div class="noreboot"><span id="a_bold">Bold</span> :</div>
                <input id="bold" name="bold" type="checkbox" /><span id="a_boldyes">Enalbe</span>
            </div>
            <div webtip="Horizontal Offset" style="margin-top: 0px;margin-bottom: 0px;" class="sitesettings">
                <div class="noreboot" style="margin-top:21px !important;"><span id="a_horizontaloffset">Horizontal Offset</span> :</div>
                <div class="startspan"></div>
                <div class="dragContainer">
                    <div id="dragHorizontalDiv" class="dragDiv">
                        <div class="voldragDiv"></div>
                        <div class="volchangeDiv"></div>
                        <div class="volimg"><span class="volspan"></span></div>
                    </div>
                </div>
                <div class="endspan"></div>
            </div>
            <div webtip="Vertical Offset" style="margin-top: -5px;" class="sitesettings">
                <div class="noreboot" style="margin-top:21px !important;"><span id="a_verticaloffset">Vertical Offset</span> :</div>
                <div class="startspan"></div>
                <div class="dragContainer">
                    <div id="dragVerticalDiv" class="dragDiv">
                        <div class="voldragDiv"></div>
                        <div class="volchangeDiv"></div>
                        <div class="volimg"><span class="volspan"></span></div>
                    </div>
                </div>
                <div class="endspan"></div>
            </div>
            <!--site settings  end-->
            <div class="titlediv">
                <div class="titleboot"><span id="a_othertitle">Other</span></div>
            </div>
            <div webtip="Fan Speed" style="display:none;">
                <div class="noreboot"><span id="a_fannoise">Fan Speed</span> :</div>
                <select id="fannoise" name="fannoise">
                    <option value="0">Normal</option>
                    <option value="1">Full Speed</option>
                </select>
            </div>
            <div webtip="Enable Multiply Server Mode" style="display:none;">
                <div class="rebootitem"><span id="a_multservermode">Enable Multiply Server Mode</span> :</div>
                <input name="multservermode" type="checkbox" id="multservermode"><span id="a_useranportyes">Yes</span>
            </div>
            <div webtip="Local RTP Port">
                <div class="noreboot"><span id="a_rtpport">Local RTP Port</span> :</div>
                <input name="rtpport" type="text" id="rtpport" value='5004' /><em></em>
            </div>
            <div webtip="Use Random Port">
                <div class="rebootitem"><span id="a_useranport">Use Random Port</span> :</div>
                <input name="randomport" type="checkbox" id="randomport"><span id="a_useranportyes">Yes</span>
            </div>
            <div webtip="Disable in-call DTMF display">
                <div class="noreboot"><span id="a_disdtmf">Disable in-call DTMF display</span> :</div>
                <input type="checkbox" id="disableincalldtmf" name="disableincalldtmf" class="inputradio"><span id="a_disdtmfyes">Yes</span>
            </div>
            <div webtip="Hide LDAP Contacts" style="display:none;">
                <div class="noreboot"><span id="a_ldapcontact">Hide LDAP Contacts</span> :</div>
                <input type="checkbox" id="ldapcontact" name="ldapcontact" class="inputradio"><span id="a_disdtmfyes">Yes</span>
            </div>
            <div webtip="Hide Local Call History" style="display:none;">
                <div class="noreboot"><span id="a_localcallhistory">Hide Local Call History</span> :</div>
                <input type="checkbox" id="localcallhistory" name="localcallhistory" class="inputradio"><span id="a_disdtmfyes">Yes</span>
            </div>
            <div webtip="BS Call Log & Contacts Update Interval" style="display:none;">
                <div class="noreboot"><span id="a_callcontactinter">BS Call Log & Contacts Update Interval(s)</span> :</div>
                <input name="callcontactinter" type="text" id="callcontactinter" value='20' />
            </div>
            <div webtip="Disable Remote Control App Connection">
                <div class="noreboot"><span id="a_remoteappconnect">Remote Control app connect directly</span> :</div>
                <input name="remoteappconnect" type="checkbox" id="remoteappconnect"><span id="a_remoteappconnectyes">Yes</span>
            </div>
            <!--div webtip="Remote Control Touchpad Sensitivity">
                <div class="noreboot"><span id="a_touchpadsen">Remote Control Touchpad Sensitivity</span> :</div>
                <select id="touchpadsen" name="touchpadsen">
                    <option value="2">Normal</option>
                    <option value="1">Slow</option>
                    <option value="3">Fast</option>
                </select>
            </div-->
            <div webtip="Keep-alive Interval">
                <div class="noreboot"><span id="a_keepa">Keep-alive Interval (s)</span> :</div>
                <input name="keepalive" type="text" id="keepalive" value='20' />
            </div>
            <div webtip="STUN/TURN Server">
                <div class="rebootitem"><span id="a_stunserver">STUN/TURN Server</span> :</div>
                <input id="stunserver" name="stunserver" type="text" />
            </div>
            <div webtip="TURN Server Username">
                <div class="rebootitem"><span id="a_stunservername">TURN Server Username</span> :</div>
                <input id="stunservername" name="stunservername" type="text" />
            </div>
            <div webtip="TURN Server Password">
                <div class="rebootitem"><span id="a_stunserverpwd">TURN Server Password</span> :</div>
                <input id="stunserverpwd" name="stunserverpwd" type="password" />
            </div>
            <div webtip="Use NAT IP">
                <div class="rebootitem"><span id="a_usenatip">Use NAT IP</span> :</div>
                <input name="natip" type="text" id="natip" value='' />
            </div>
            
        </fieldset>
        <div class="savediv">
            <button id="a_save" type="button" class="savebtn">Save</button>
            <button id="a_cancel" type="button" class="cancelbtn">Cancel</button>
        </div>
	</form>

</div>
<script type="text/javascript">
	var cookie_lang = $.cookie( "MyLanguage");
    var version = $.cookie("ver");
    if ( !cookie_lang ){
        cookie_lang = 'en';
	}
    if ( cookie_lang == 'zh' ){
        document.write("<script src='../js/jquery.validate.messages_cn.js'><\/script>");
	}
    if(!version)
        version = new Date().getTime();
    document.write("<script src='../js/public.js?ver=" + version + "'><\/script>");
    document.write("<script src='../lang/" + cookie_lang + ".js?ver=" + version + "'><\/script>");

</script>
<script>
/* jQuery autoResize (textarea auto-resizer) */
(function(a){a.fn.autoResize=function(j){var b=a.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1000},j);this.filter('textarea').each(function(){var c=a(this).css({resize:'none','overflow-y':'hidden'}),k=c.height(),f=(function(){var l=['height','width','lineHeight','textDecoration','letterSpacing'],h={};a.each(l,function(d,e){h[e]=c.css(e)});return c.clone().removeAttr('id').removeAttr('name').css({position:'absolute',top:0,left:-9999}).css(h).attr('tabIndex','-1').insertBefore(c)})(),i=null,g=function(){f.height(0).val(a(this).val()).scrollTop(10000);var d=Math.max(f.scrollTop(),k)+b.extraSpace,e=a(this).add(f);$("#iframediv",parent.document.body).css('width','100%').css('height',$("body").height() + b.extraSpace);$(".footContent",parent.document.body).css('top',$("body").height() + b.extraSpace + 160);if(i===d){return}i=d;if(d>=b.limit){a(this).css('overflow-y','');return}b.onResize.call(this);b.animate&&c.css('display')==='block'?e.stop().animate({height:d},b.animateDuration,b.animateCallback):e.height(d)};c.unbind('.dynSiz').bind('keyup.dynSiz',g).bind('keydown.dynSiz',g).bind('change.dynSiz',g)});return this}})(jQuery);
</script>

<script type="text/javascript">
var captiontype = parseInt($.cookie( "CaptionType"));
var fontColor = new jscolor.color(document.getElementById('fontcolor'), {});
var req_items = new Array;
var mIncalldtmf;
var mSleepmode = -1;
var mFanSpeed = 0;

req_items.push(
   // new ReqItem("sleepmode", "sleep_time", ""),
    new ReqItem("fannoise", "22049", ""),
    new ReqItem("remoteappconnect", "25022", ""),
    //new ReqItem("touchpadsen", "25031", ""),
    new ReqItem("keepalive", "84", ""),
    new ReqItem("natip", "101", ""),
    new ReqItem("rtpport", "39", ""),
    new ReqItem("randomport", "78", ""),
    new ReqItem("disableincalldtmf", "338", ""),
    new ReqItem("stunserver", "76", ""),
    new ReqItem("stunservername", "22042", ""),
    new ReqItem("stunserverpwd", "22043", ""),
    new ReqItem("multservermode", "multi_server_mode", "")
);
$(function(){
    setInitState();
    cb_get(req_items);
    cb_get_action("getsleepmode&region=advanset");
    cb_get_action("gettimeoutopt&region=advanset");
    cb_get_action("checksecurity&region=advanset");
    pageEventActions();
});
function get_item_suc_callback(){
    mFanSpeed = $("#fannoise").val();
}
function fomatFloat(src,pos){     
    return Math.round(src*Math.pow(10, pos))/Math.pow(10, pos);             
} 

function setInitState(){
    translate_generalset();
    //add to judge the value about local rtp port is even or not 
    $.validator.addMethod("even",function(value,element,params){
        if(params)
        {
            if(value%2 != 0)
                return false;
            else
                return true;
        }
    },a_16685);
    $("#Formvalidate").validate({
		rules: {
			rtpport: { digits:true, range:[1024,65400], even:true },
            keepalive: { digits:true, range:[10,160] },
            stunserver: { url: true},
            stunservername: { maxlength: 128 },
            stunserverpwd: { maxlength: 128 }
        },
		errorElement: "em",
		success: function(label) { label.text(" ").addClass("success"); }
    });
    $("#sitename").rules("add",{maxlength:16});
    $('#sslcer,#sslpkey').autoResize({
        onResize : function() {
            $(this).css({opacity:0.8});
        },
        animateCallback : function() {
            $(this).css({opacity:1});
        },
        animateDuration : 300,
        extraSpace : 100,
        limit: 250
    });
    $(".volimg").draggable({ 
        cursor: "move", 
        axis:"x", 
        containment: $(".dragContainer"),
        create:function(event,ui){
            $(this).parent().parent().siblings(".startspan").text(0);
            $(this).parent().parent().siblings(".endspan").text(96);
            $(this).css("left",100);
            $(this).prev(".volchangeDiv").css("width",100);
            var vol = (96/200)*100;
            $(this).children(".volspan").text(fomatFloat(vol,0));
        },
        drag:function(event,ui){
            $(this).prev(".volchangeDiv").css("width",ui.position.left);
            //console.log(ui.position.left);
            var vol = (96/200)*ui.position.left;
            vol = fomatFloat(vol,0);
            $(this).children(".volspan").text(vol);
        }
    });
    $("#touchpadsen, #bgtransparency,#displayposition,#displayduration,#fontsize,#fannoise").sSelect();
    var sqlitestr="sqlitedisplay&region=advanset&type=sitesetting&affect=read";

    //get sitesettings information
    cb_get_action(sqlitestr);
}

function cb_get_action_done(data,action){
    if( data.substring(0, 1) == "{" )
    {
        if( action.indexOf("getsleepmode&region=advanset" ) != "-1" ){
            var tObj = eval("(" + data + ")");
            mSleepmode = tObj.sleepmode;
            $("#sleepmode").val(mSleepmode);
            $("#sleepmode").sSelect();
        }else if( action.indexOf("gettimeoutopt" ) != "-1" ){
            var tObj = eval("(" + data + ")");
            if(tObj.res == "success")
            {
                $("#timeoutopt").val(tObj.policy);
                $("#timeoutopt").sSelect();
            }
        }else if( action.indexOf("affect=read" ) != "-1" ){
            var tObj = eval("(" + data + ")");
            if(tObj.Response == "Success")
            {
                var items = tObj.Data;
                setparaments(items);
            }
            else
                get_item_suc_callback();
        }else if( action.indexOf("affect=update" ) != "-1" )
        {
            var tObj = eval("(" + data + ")");
            if(tObj.Response == "Success")
                view_message(a_7479, MSG_OK);
            else
                view_message(a_17+" "+a_4805, MSG_FAIL);
        }
    }else{
        var msgs = res_parse_rawtext(data);
        cb_if_auth_fail(msgs);
        if (cb_is_fail(msgs)){}   
        else {
            if(action == "checksecurity&region=advanset"){
                var locked = msgs.headers['locked'];
                if( locked == '1' ){
                    $(".sitesettings").hide();
                    $("#sitename").rules("remove");
                }
            }
        }
    }
}

function cb_put_suc(data, mode)
{
    var msgs = res_parse_rawtext(data);
    cb_if_auth_fail(msgs);
    if( cb_if_is_fail(msgs) )
        view_message(a_16419, MSG_FAIL);
    else {
        view_message(a_7479, MSG_OK); 
    }
    checkIsApplyNeed();
}

function setparaments(items){
    for(var i=0;items[i] != undefined;i++)
    {
        $("#bgtransparency").getSetSSValue(items[i].bg_tp);
        $("#sitename").val(items[i].Sitename);
        $("#displayposition").getSetSSValue(items[i].displayposition);
        $("#displayduration").getSetSSValue(items[i].displayduration);
        fontColor.fromString(items[i].fontcolor);
        $("#fontsize").getSetSSValue(items[i].fontsize);

        if(parseInt(items[i].bold) == 0)
            $("#bold").attr("checked",false);
        else
            $("#bold").attr("checked",true);

        var Horizontal = items[i].horizont;
        var Vertical = items[i].vertical;
        $("#dragHorizontalDiv .volimg" ).draggable( "destroy" );
        $("#dragVerticalDiv .volimg" ).draggable( "destroy" );
        $("#dragHorizontalDiv .volimg").draggable({ 
            cursor: "move", 
            axis:"x", 
            containment: $(".dragContainer"),
            create:function(event,ui){
                var left = (Horizontal/96)*200;
                $(this).parent().parent().siblings(".startspan").text(0);
                $(this).parent().parent().siblings(".endspan").text(96);
                $(this).css("left",left);
                $(this).prev(".volchangeDiv").css("width",left);
                var vol = (96/200)*left;
                $(this).children(".volspan").text(fomatFloat(vol,0));
            },
            drag:function(event,ui){
                $(this).prev(".volchangeDiv").css("width",ui.position.left);
                //console.log(ui.position.left);
                var vol = (96/200)*ui.position.left;
                vol = fomatFloat(vol,0);
                $(this).children(".volspan").text(vol);
            },
            stop:function(event,ui){
                //console.log(ui.position.left);
                var vol = $(this).children(".volspan").text();
                var action = "setSitesettingOffset&region=advanset&horizont="+ vol +"&direction=x";
                cb_get_action(action);
            }
        });
        $("#dragVerticalDiv .volimg").draggable({ 
            cursor: "move", 
            axis:"x", 
            containment: $(".dragContainer"),
            create:function(event,ui){
                var left = (Vertical/96)*200;
                $(this).parent().parent().siblings(".startspan").text(0);
                $(this).parent().parent().siblings(".endspan").text(96);
                $(this).css("left",left);
                $(this).prev(".volchangeDiv").css("width",left);
                var vol = (96/200)*left;
                $(this).children(".volspan").text(fomatFloat(vol,0));
            },
            drag:function(event,ui){
                $(this).prev(".volchangeDiv").css("width",ui.position.left);
                //console.log(ui.position.left);
                var vol = (96/200)*ui.position.left;
                vol = fomatFloat(vol,0);
                $(this).children(".volspan").text(vol);
            },
            stop:function(event,ui){
                //console.log(ui.position.left);
                var vol = $(this).children(".volspan").text();
                var action = "setSitesettingOffset&region=advanset&vertical="+ vol +"&direction=y";
                cb_get_action(action);
            }
        });
    }
}

function translate_generalset(){
    $("#a_timeoutopt").text(a_19321);
    $("#timeoutopt option:eq(0)").text(a_19323);
    $("#timeoutopt option:eq(1)").text(a_19325);
    $("#a_sleepmode").text(a_19322);
    $("#sleepmode option:eq(0)").text(a_42);
    $("#sleepmode option:eq(1)").text(a_12112);
    $("#sleepmode option:eq(2)").text(a_12068);
    $("#sleepmode option:eq(3)").text(a_12069);
    $("#sleepmode option:eq(4)").text(a_12070);
    $("#sleepmode option:eq(5)").text(a_12071);
    $("#sleepmode option:eq(6)").text(a_12113);
    /***********site settings**************/
    $("#a_bgtransparency").text(a_16221);
    $("#bgtransparency option:eq(0)").text(a_16223);
    $("#a_sitename").text(a_16225);
    $("#a_displayposition").text(a_16226);
    $("#displayposition option:eq(0)").text(a_16227);
    $("#displayposition option:eq(1)").text(a_16228);
    $("#displayposition option:eq(2)").text(a_16229);
    $("#displayposition option:eq(3)").text(a_16230);
    $("#a_displayduration").text(a_16231);
    $("#displayduration option:eq(4)").text(a_16232);
    $("#displayduration option:eq(1)").text("1 "+a_109);
    $("#displayduration option:eq(2)").text("5 "+a_110);
    $("#displayduration option:eq(3)").text("10 "+a_110);
    $("#displayduration option:eq(0)").text(a_16233);
    $("#a_fontcolor").text(a_16234);
    $("#a_fontsize").text(a_16235);
    $("#fontsize option:eq(0)").text(a_16246);
    $("#fontsize option:eq(1)").text(a_16247);
    $("#fontsize option:eq(2)").text(a_16248);
    $("#fontsize option:eq(3)").text(a_16236);
    $("#fontsize option:eq(4)").text(a_16249);
    $("#fontsize option:eq(5)").text(a_16250);
    $("#fontsize option:eq(6)").text(a_16251);
    $("#a_bold").text(a_16237);
    //$("#a_horizontaloffset").text(a_40);
    //$("#a_verticaloffset").text(a_40);
    /*************************/
    $("#a_general").text(a_16023);
    $("#a_disdtmf").text(a_16279);
    $("#a_rtpport").text(a_16280);
    $("#a_remoteappconnect").text(a_16616);
    $("#a_touchpadsen").text(a_16688);
    $("#touchpadsen option:eq(0)").text(a_9500);
    $("#touchpadsen option:eq(1)").text(a_16243);
    $("#touchpadsen option:eq(2)").text(a_16240);
    $("#a_useranport").text(a_16281);
    $("#a_boldyes, #a_useranportyes, #a_disdtmfyes, #a_remoteappconnectyes").text(a_5);
    $("#a_keepa").text(a_16282);
    $("#a_stunserver").text(a_16283);
    $("#a_stunservername").text(a_19026);
    $("#a_stunserverpwd").text(a_19027);
    $("#a_usenatip").text(a_16284);
    $("#a_cancel").text(a_3);
    $("#a_save").text(a_17);
    $("#a_powertitle").text(a_16617);
    $("#a_sitetitle").text(a_16013);
    $("#a_horizontaloffset").text(a_16610);
    $("#a_verticaloffset").text(a_16611);
    $("#a_othertitle").text(a_1108);
    $("#a_fannoise").text(a_16689);
    $("#fannoise option:eq(0)").text(a_9500);
    $("#fannoise option:eq(1)").text(a_16690);
    $("#a_multservermode").text(a_16622);
    $("#a_ldapcontact").text(a_16623);
    $("#a_localcallhistory").text(a_16624);
    $("#a_callcontactinter").text(a_16625);
}
function pageEventActions(){
    $("#a_save").click(function(){
        if( !$("#Formvalidate").valid() ){
            view_message(a_16442,MSG_FAIL);
            return false;
        }

        var bg_tp = parseInt($("#bgtransparency").val());
        var Sitename = $("#sitename").val();
        var displayposition = parseInt($("#displayposition").val());
        var displayduration = parseInt($("#displayduration").val());
        var fontcolor = "#"+$("#fontcolor").val();
        var fontsize = parseInt($("#fontsize").val());
        var bold = $("#bold").prop("checked");
        
        if(bold == true)
            bold = 1;
        else
            bold = 0;

        //var sqlitestr="sqlitedisplay&region=advanset&type=sitesetting&affect=update&bgtp=" + bg_tp + "&sitename=" + encodeURIComponent(Sitename) + "&dispos=" + displayposition + "&disduration=" + displayduration + "&fontcolor="+encodeURIComponent(fontcolor) + "&fontsize="+fontsize + "&bold=" + bold + "&isbroadcast=" + broadcast;
        var action = "setSitesettingInfo&region=advanset&bgtp=" + bg_tp + "&sitename=" + encodeURIComponent(Sitename) + "&dispos=" + displayposition + "&disduration=" + displayduration + "&fontcolor="+encodeURIComponent(fontcolor) + "&fontsize="+fontsize + "&bold=" + bold;
        //save sitesettings information
        cb_get_action(action);
        if( mSleepmode != $("#sleepmode").val() ){
            mSleepmode = $("#sleepmode").val();
            cb_get_action("setsleepmode&region=advanset&sleepmode=" + mSleepmode);
        }
        
        var timeoutopt = $("#timeoutopt").val();
        cb_get_action("settimeoutopt&region=advanset&type=" + timeoutopt);
        
        cb_put(req_items);

        mIncalldtmf = "0";
        if( $("#disableincalldtmf").prop("checked") )
            mIncalldtmf = "1";
        var applyfun = $.cookie("applyfunc");
        if (applyfun != undefined && applyfun != "")
            applyfun += ";cb_set_incalldtmf(" + mIncalldtmf + ")";
        else
            applyfun = "cb_set_incalldtmf(" + mIncalldtmf + ")";
        if( mFanSpeed != $("#fannoise").val() ){
            mFanSpeed = $("#fannoise").val();
            applyfun += ";cb_get_action('setfanspeed&region=advanset')";
        }
        $.cookie("applyfunc", applyfun, {path: '/', expires: 10});
    });
}

</script>

</body>

</html>
