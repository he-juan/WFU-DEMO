<!-- saved from url=(0022)http://internet.e-mail -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link href='../css/pageframe.css' type='text/css' rel='stylesheet'>
<link href='../css/black_frame.css' type='text/css' rel='stylesheet' id="framecssfile">
<script type='text/javascript' src='../js/jquery.tools.min.js'></script>	
<script type="text/javascript" src='../js/jquery.cookie.js'></script>
<style>
fieldset{margin-top:25px;}
fieldset div { width:690px;} 
.noreboot { width:300px; }
fieldset div div{ padding-left:0px; }
#statusdiv{margin-top:5px;position:absolute;}
</style>
</head>
<body id="framebody">
<div class="tooltip"></div>

<div id="mainbody" class="maindiv">
    <div class="navi"><span id="a_netsta">Network Status</span></div>
    <div id="statusdiv"></div>
	<form action="" method="get" class="Formvalidate">
		<fieldset>
            <div webtip="MAC Address ">
                <div class="noreboot"><span id="a_mac">MAC Address</span> :</div>
                <div><span id="mac"></span></div>
            </div>
            <div webtip="NAT Type">
                <div class="noreboot"><span id="a_nat">NAT Type</span> :</div>
                <div><span id="nattype"></span></div>
            </div>
            <div id="vpnipdiv">
                <div class="noreboot"><span id="a_vpnip">VPN IP</span> :</div>
                <div><span id="vpnip"></span></div>
            </div>

            <div webtip="" class="noreboot"><span class="legendspan">IPv4</span></div>
            <div webtip="Address Type ">
                <div class="noreboot"><span id="a_networktype">Address Type</span> :</div>
                <div><span id="network"></span></div>
            </div>
            <div webtip="IP Address ">
                <div class="noreboot"><span id="a_ipaddress">IP Address</span> :</div>
                <div><span id="ipaddress"></span></div>
            </div>
            <div webtip="Subnet Mask ">
                <div class="noreboot"><span id="a_mask">Subnet Mask</span> :</div>
                <div><span id="mask"></span></div>
            </div>
            <div webtip="Default Gateway ">
                <div class="noreboot"><span id="a_gateway">GateWay</span> :</div>
                <div><span id="gateway"></span></div>
            </div>
            <div webtip="DNS Server 1 ">
                <div class="noreboot"><span id="a_dns">DNS Server</span> 1:</div>
                <div><span id="dns"></span></div>
            </div>
            <div webtip="DNS Server 2 ">
                <div class="noreboot"><span id="a_dns2">DNS Server</span> 2:</div>
                <div><span id="dns2"></span></div>
            </div>

            <div webtip="" class="noreboot"><span class="legendspan">IPv6</span></div>
            <div webtip="IPv6 Address Type ">
                <div class="noreboot"><span id="a_ipv6networktype">IPv6 Address Type</span></div>
                <div><span id="ipv6network"></span></div>
            </div>
            <div webtip="IPv6 Address ">
                <div class="noreboot"><span id="a_ipv6address">IPv6 Address</span></div>
                <div><span id="ipv6address"></span></div>
            </div>
            <div webtip="IPv6 DNS Server 1 ">
                <div class="noreboot"><span id="a_ipv6dns">IPv6 DNS Server</span></div>
                <div><span id="ipv6dns"></span></div>
            </div>
            <div webtip="IPv6 DNS Server 2 ">
                <div class="noreboot"><span id="a_ipv6dns2">IPv6 DNS Server</span></div>
                <div><span id="ipv6dns2"></span></div>
            </div>
        </fieldset>
	</form>

</div>
<input id="netstatus" name="netstatus" type="text" value="" style="display:none" />
<script type="text/javascript">
	var cookie_lang = $.cookie( "MyLanguage");
    var version = $.cookie("ver");
    if ( !cookie_lang ){
        cookie_lang = 'en';
	}
    if(!version)
        version = new Date().getTime();
    document.write("<script src='../js/public.js?ver=" + version + "'><\/script>");
    document.write("<script src='../lang/" + cookie_lang + ".js?ver=" + version + "'><\/script>");

</script>
<script type="text/javascript">
var req_items = new Array;
req_items.push(
    new ReqItem("nattype", "80", ""),
    new ReqItem("vpnip", "vpn_ip", ""),
    new ReqItem("netstatus", "network_status", "")
);
$(function(){
    translate_network();
    cb_get(req_items);
    //cb_get_netmode();
    cb_get_action('network&region=status');
    //cb_get_action('vpnenable&region=status');  
});
function cb_get_action_done(data,action){
    if( data.substring(0, 1) == "{" ){
        data = eval("(" + data + ")");
        if(action == 'network&region=status')
            view_status_network_write(data);
    }
    else{
        var msgs = res_parse_rawtext(data);
        cb_if_auth_fail(msgs);
        if (cb_is_fail(msgs)){
        }else {
            if(action == 'vpnenable&region=status')
                view_vpnenable(msgs);
        }
    }
}
function check_vpnip(msgs)
{
	var vpnip = msgs.headers['vpn_ip'];
    if(vpnip == '' || vpnip == ' ' || vpnip == undefined)
        $('#vpnipdiv').hide();
    else
        $('#vpnipdiv').show();
}

function get_item_suc_callback(msgs){
    check_vpnip(msgs);
}

/*function cb_get_netmode()
{
    var sqlstr = 'select * from secure where name="eth_mode";';
    var urihead = "action=sqlitesetting&sqlstr=" + encodeURIComponent(sqlstr);
    urihead += "&time=" + new Date().getTime();
    $.ajax ({
        type: 'get',
        url:'/manager',
        data:urihead,
        dataType:'text',
        success:function(data) {
            cb_get_netmode_suc(data);
        },
        error:function(xmlHttpRequest, errorThrown) {
            view_message("Get Error", MSG_ALERT);
        }
    });
}
function cb_get_netmode_suc(data)
{
    var msgs = res_parse_rawtext(data);
    cb_if_auth_fail(msgs);
    var setvalue = msgs.headers["eth_mode"];
    if( setvalue == "manual" )
        $("#network").text( a_static );
    else
        $("#network").text( a_dhcp );
}*/
function view_vpnenable(msgs)
{
	var vpnenable = msgs.headers['7050'];
    if(vpnenable == '1')
        $('#vpnipdiv').show();
    else
        $('#vpnipdiv').hide();
}

function view_status_network_write(data)
{
    if(data.res == "success"){
        var mac = data.mac;
        var ipv4type = data.ipv4Type;
        var ipv4addr = data.ipv4Addr;
        var mask = data.mask;
        var gateway = data.gateway;
        var dns1 = data.dns1;
        var dns2 = data.dns2;
        var ipv6type = data.ipv6Type;
        var ipv6addr = data.ipv6Addr;
        var ipv6dns1 = data.ipv6Dns1;
        var ipv6dns2 = data.ipv6Dns2;
    }
    
    $("#mac").text( mac.toUpperCase() );
    $("#ipaddress").text( ipv4addr );

    $("#mask").text(mask);
    $("#gateway").text(gateway);
    $("#dns").text(dns1);
    $("#dns2").text(dns2);
        
    if( ipv4type == 0 || ipv4type == "" )
        $("#network").text( a_4124 );
    else if( ipv4type == 1 )
        $("#network").text( a_4125 );
    else if( ipv4type == 2 )
        $("#network").text( a_16183 );

    if (ipv6addr == "") {
        ipv6addr = "0:0:0:0:0:0:0:0";
    }
    $("#ipv6address").text(ipv6addr);

    if (ipv6type == 0) {
        $("#ipv6network").text(a_4124);
    } else if(ipv6type == 1){
        $("#ipv6network").text(a_4125);
    } else if(ipv6type == 2){
        $("#ipv6network").text(a_16183);
    }

    if (ipv6dns1 == "")
        ipv6dns1 = "0:0:0:0:0:0:0:0";
    $("#ipv6dns").text(ipv6dns1);

    if (ipv6dns2 == "")
        ipv6dns2 = "0:0:0:0:0:0:0:0";
    $("#ipv6dns2").text(ipv6dns2);
}
function translate_network(){
    $("#a_netsta").text(a_4147);
    $("#a_mac").text(a_16403);
    $("#a_networktype").text(a_4150);
    $("#a_ipaddress").text(a_4313);
    $("#a_ipv6address").text(a_19226);
    $("#a_mask").text(a_4127);
    $("#a_gateway").text(a_16191);
    $("#a_dns, #a_dns2").text(a_4128);
    $("#a_nat").text(a_4155);
    $("#a_ipv6networktype").text(a_19308);
    $("#a_ipv6dns").text("IPv6 " + a_19227);
    $("#a_ipv6dns2").text("IPv6 " + a_19228);
}
</script>

</body>

</html>
