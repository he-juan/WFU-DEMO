<!-- saved from url=(0022)http://internet.e-mail -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href='../css/pageframe.css' type='text/css' rel='stylesheet'>
<link href='../css/apps.css' type='text/css' rel='stylesheet' id="framecssfile">
<script type='text/javascript' src='../js/jquery.tools.min.js'></script>	
<script type="text/javascript" src='../js/jquery.cookie.js'></script>
<script type="text/javascript" src='../js/jquery.prompt.js'></script>
<style type="text/css">
.maindiv{
    background: transparent;
    border: none;
}
#leftdiv{*width:380px !important;}
#rightdiv{*width:340px !important;}
.appsbtn{margin:0 0 0 24px;}
#backupbtn{
    width: 70px;
    height: 26px;
    border: none;
    position: relative;
    left: 200px;
    bottom: 0;
}
#selectall{margin:0;}
#adminpsw{width:400px;height:135px;position:absolute;top:50%;left:50%;margin:-75px 0 0 -200px;border:1px solid #ccc;display:none;background: #f8f9fa;text-align:center;}
#adminpsw .appsbtn{margin:0 0 0 110px;}
.errortip{
    height: 20px;
    margin:40px auto 0 90px;
    font-style: italic;
    text-align:center;
}
input[type="password"]{width:150px;}
</style>
<body id="framebody" class="maintenancebody">
<div id="mainbody" class="maindiv">
    <div class="navi"><span id="a_langset">Backup</span></div>
    <div id="leftdiv" class="appleft">
        <div class="titlediv">
            <div class="titleboot"><span id="a_backupfile">Backup Files</span></div>
        </div>
        <div webtip="" id="itemsdiv">
            <div id="divcallbtn"></div>
        </div>
        <div class="appsbtn">
            <button id="addcontact">New</button>
            <button id="delcontact"></button>
        </div>  
    </div>
    <div id="rightdiv" class="appright">
        <div class="titlediv">
            <div class="titleboot"><span id="a_sysfile">System Files</span></div>
        </div>
        <div webtip="" id="itemsdiv">
        </div>
        <div class="appsbtn" id="rightbtn">
            <input type="checkbox" id="selectall" class="selectall" />
            <button id="backupbtn" class="backupbtn">Backup</button>
        </div>  
    </div>
    <div id="adminpsw">
        <div class="titlediv">
            <div class="titleboot"><span id="a_confirmpsw">Admin Password</span></div>
        </div>
        <div class="errortip">&nbsp;&nbsp;&nbsp;&nbsp;</div>
        <div webtip="" id="itemsdiv">
            <span>Confirm Admin Password</span> : 
            <input type="password" id="confirmadminpsw" autocomplete="off" />
        </div>
        <div class="appsbtn" id="">
            <button id="confirmOK" class="confirmbtn">OK</button>
            <button id="confirmCancel" class="confirmbtn">Cancel</button>
        </div>
    </div>
    <input type="password" id="adminpasswd" style="display:none;" />
</div>

<script type="text/javascript">
	var cookie_lang = $.cookie( "MyLanguage");
    if ( !cookie_lang ){
        cookie_lang = 'en';
	}
    document.write("<script src='../lang/" + cookie_lang + ".js'><\/script>");

</script>
<script type="text/javascript" src='../js/public.js'></script>
<script type="text/javascript">


$(function(){
    translate_page();
    pageEventActions();
});
function cb_get_action_done(data, action) {
    var msgs = res_parse_rawtext(data);
    cb_if_auth_fail(msgs);
    if (cb_is_fail(msgs)){
        
    }else {
    
    }
}
function translate_page(){
    $("#a_backupfile").text(a_16053);
    $("#a_sysfile").text(a_16054);
    $("#backupbtn").text(a_306);
    $("#addcontact").text(a_23);
    //$("#a_new").text(a_new);
}

function cb_confirm_done(data){
    var msgs = eval( "("+ data+ ")");
    if (msgs.res == "success"){
        $("#adminpsw").hide();
    }else 
        display_error_tip(a_6155);
}

function display_error_tip(msg){
    $('.errortip').find(".formtips").remove();
    var $errormsg = $("<span style='color:red;' class='formtips'>" + msg + "</span>");
    $errormsg.appendTo($('.errortip'));
    $('.formtips').fadeOut(3000);
}

function pageEventActions(){
    $(".itemcheck .inputcbx").live("click", function() {
        if ($(this).prop("checked") != true) {
            var isall = 1;
            $("#selectall").removeAttr("checked");//.button("refresh");
            $(".itemcheck .inputcbx").each(function(index, item) {
                if ($(item).prop("checked") == true) {
                    isall = 0;
                    return false;   
                }
            });

            if(isall == 0)
                $("#delcontact").removeAttr("disabled");
            else
                $("#delcontact").attr("disabled","disabled");

        } else {
            var isall = 1;
            $(".itemcheck .inputcbx").each(function(index, item) {
                if ($(item).prop("checked") != true) {
                    isall = 0;
                    return false;   
                }
            });

            if (isall == 1)
                $("#selectall").attr("checked", "checked");//.button("refresh");

            $("#delcontact").removeAttr("disabled");
        }
    });

    $("#selectall").click(function(){
        if ($(this).prop("checked") == true) {
            $(".itemcheck .inputcbx").attr("checked", "checked");//.button("refresh");
            $("#delcontact").removeAttr("disabled");
        } else {
            $(".itemcheck .inputcbx").removeAttr("checked");//.button("refresh");
            $("#delcontact").attr("disabled","disabled");
        }
    });

    $("#addcontact").click(function(){
        
    });

    $("#backupbtn").click(function(){
        var g_actype = $.cookie('type');
        if (typeof g_actype == "undefined" || !g_actype) {
            g_actype = "user";
        }
        if (g_actype.toLowerCase() == 'user') {
            $("#adminpsw").show();
            return false;
        }

    });

    $("#confirmOK").click(function(){
        var urihead = "action=confirmadminpsw&var=2&adminpsw=" + encodeURIComponent($('#confirmadminpsw').val()) + "";
        urihead += "&time=" + new Date().getTime();
        $.ajax ({
            type: 'get',
            url: '/manager',
            data: urihead,
            dataType: 'text',
            success: function(data) {
                cb_confirm_done(data);
            },
            error:function(xmlHttpRequest, errorThrown) {
                cb_networkerror(xmlHttpRequest, errorThrown);
            }
        });
    });

    $("#confirmCancel").click(function(){
        $("#adminpsw").hide();
    });
}

</script>

</body>

</html>
